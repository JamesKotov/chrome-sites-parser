(function(a){if(typeof bootstrap==="function"){bootstrap("promise",a)}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(a)}else{if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=a}}else{if(typeof window!=="undefined"||typeof self!=="undefined"){var c=typeof window!=="undefined"?window:self;var b=c.Q;c.Q=a();c.Q.noConflict=function(){c.Q=b;return this}}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}}}}}})(function(){var E=false;try{throw new Error()}catch(aj){E=!!aj.stack}var u=X();var j;var af=function(){};var ak=(function(){var at={task:void 0,next:null};var aq=at;var Q=false;var an=void 0;var e=false;var ao=[];function au(){var aw,ax;while(at.next){at=at.next;aw=at.task;at.task=void 0;ax=at.domain;if(ax){at.domain=void 0;ax.enter()}av(aw,ax)}while(ao.length){aw=ao.pop();av(aw)}Q=false}function av(aw,ax){try{aw()}catch(ay){if(e){if(ax){ax.exit()}setTimeout(au,0);if(ax){ax.enter()}throw ay}else{setTimeout(function(){throw ay},0)}}if(ax){ax.exit()}}ak=function(aw){aq=aq.next={task:aw,domain:e&&process.domain,next:null};if(!Q){Q=true;an()}};if(typeof process==="object"&&process.toString()==="[object process]"&&process.nextTick){e=true;an=function(){process.nextTick(au)}}else{if(typeof setImmediate==="function"){if(typeof window!=="undefined"){an=setImmediate.bind(window,au)}else{an=function(){setImmediate(au)}}}else{if(typeof MessageChannel!=="undefined"){var ap=new MessageChannel();ap.port1.onmessage=function(){an=ar;ap.port1.onmessage=au;au()};var ar=function(){ap.port2.postMessage(0)};an=function(){setTimeout(au,0);ar()}}else{an=function(){setTimeout(au,0)}}}}ak.runAfter=function(aw){ao.push(aw);if(!Q){Q=true;an()}};return ak})();var a=Function.call;function p(e){return function(){return a.apply(e,arguments)}}var ac=p(Array.prototype.slice);var c=p(Array.prototype.reduce||function(ao,an){var e=0,Q=this.length;if(arguments.length===1){do{if(e in this){an=this[e++];break}if(++e>=Q){throw new TypeError()}}while(1)}for(;e<Q;e++){if(e in this){an=ao(an,this[e],e)}}return an});var S=p(Array.prototype.indexOf||function(Q){for(var e=0;e<this.length;e++){if(this[e]===Q){return e}}return -1});var b=p(Array.prototype.map||function(ao,Q){var e=this;var an=[];c(e,function(ar,aq,ap){an.push(ao.call(Q,aq,ap,e))},void 0);return an});var H=Object.create||function(Q){function e(){}e.prototype=Q;return new e()};var A=p(Object.prototype.hasOwnProperty);var G=Object.keys||function(e){var an=[];for(var Q in e){if(A(e,Q)){an.push(Q)}}return an};var am=p(Object.prototype.toString);function W(e){return e===Object(e)}function w(e){return(am(e)==="[object StopIteration]"||e instanceof I)}var I;if(typeof ReturnValue!=="undefined"){I=ReturnValue}else{I=function(e){this.value=e}}var Z="From previous event:";function m(e,ap){if(E&&ap.stack&&typeof e==="object"&&e!==null&&e.stack&&e.stack.indexOf(Z)===-1){var an=[];for(var ao=ap;!!ao;ao=ao.source){if(ao.stack){an.unshift(ao.stack)}}an.unshift(e.stack);var Q=an.join("\n"+Z+"\n");e.stack=L(Q)}}function L(ao){var Q=ao.split("\n");var ap=[];for(var an=0;an<Q.length;++an){var e=Q[an];if(!g(e)&&!aa(e)&&e){ap.push(e)}}return ap.join("\n")}function aa(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function ah(e){var ao=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(ao){return[ao[1],Number(ao[2])]}var an=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(an){return[an[1],Number(an[2])]}var Q=/.*@(.+):(\d+)$/.exec(e);if(Q){return[Q[1],Number(Q[2])]}}function g(Q){var an=ah(Q);if(!an){return false}var ao=an[0];var e=an[1];return ao===j&&e>=u&&e<=s}function X(){if(!E){return}try{throw new Error()}catch(ap){var Q=ap.stack.split("\n");var an=Q[0].indexOf("@")>0?Q[1]:Q[2];var ao=ah(an);if(!ao){return}j=ao[0];return ao[1]}}function C(an,e,Q){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(e+" is deprecated, use "+Q+" instead.",new Error("").stack)}return an.apply(an,arguments)}}function l(e){if(e instanceof O){return e}if(N(e)){return M(e)}else{return z(e)}}l.resolve=l;l.nextTick=ak;l.longStackSupport=false;if(typeof process==="object"&&process&&process.env&&process.env.Q_DEBUG){l.longStackSupport=true}l.defer=h;function h(){var ao=[],aq=[],ap;var Q=H(h.prototype);var at=H(O.prototype);at.promiseDispatch=function(av,aw,au){var e=ac(arguments);if(ao){ao.push(e);if(aw==="when"&&au[1]){aq.push(au[1])}}else{l.nextTick(function(){ap.promiseDispatch.apply(ap,e)})}};at.valueOf=function(){if(ao){return at}var e=J(ap);if(y(e)){ap=e}return e};at.inspect=function(){if(!ap){return{state:"pending"}}return ap.inspect()};if(l.longStackSupport&&E){try{throw new Error()}catch(ar){at.stack=ar.stack.substring(ar.stack.indexOf("\n")+1)}}function an(e){ap=e;at.source=e;c(ao,function(av,au){l.nextTick(function(){e.promiseDispatch.apply(e,au)})},void 0);ao=void 0;aq=void 0}Q.promise=at;Q.resolve=function(e){if(ap){return}an(l(e))};Q.fulfill=function(e){if(ap){return}an(z(e))};Q.reject=function(e){if(ap){return}an(D(e))};Q.notify=function(e){if(ap){return}c(aq,function(av,au){l.nextTick(function(){au(e)})},void 0)};return Q}h.prototype.makeNodeResolver=function(){var e=this;return function(Q,an){if(Q){e.reject(Q)}else{if(arguments.length>2){e.resolve(ac(arguments,1))}else{e.resolve(an)}}}};l.Promise=U;l.promise=U;function U(an){if(typeof an!=="function"){throw new TypeError("resolver must be a function.")}var e=h();try{an(e.resolve,e.reject,e.notify)}catch(Q){e.reject(Q)}return e.promise}U.race=n;U.all=x;U.reject=D;U.resolve=l;l.passByCopy=function(e){return e};O.prototype.passByCopy=function(){return this};l.join=function(e,Q){return l(e).join(Q)};O.prototype.join=function(e){return l([this,e]).spread(function(Q,an){if(Q===an){return Q}else{throw new Error("Q can't join: not the same: "+Q+" "+an)}})};l.race=n;function n(e){return U(function(ap,ao){for(var an=0,Q=e.length;an<Q;an++){l(e[an]).then(ap,ao)}})}O.prototype.race=function(){return this.then(l.race)};l.makePromise=O;function O(Q,ap,ao){if(ap===void 0){ap=function(aq){return D(new Error("Promise does not support operation: "+aq))}}if(ao===void 0){ao=function(){return{state:"unknown"}}}var an=H(O.prototype);an.promiseDispatch=function(au,av,ar){var aq;try{if(Q[av]){aq=Q[av].apply(an,ar)}else{aq=ap.call(an,av,ar)}}catch(at){aq=D(at)}if(au){au(aq)}};an.inspect=ao;if(ao){var e=ao();if(e.state==="rejected"){an.exception=e.reason}an.valueOf=function(){var aq=ao();if(aq.state==="pending"||aq.state==="rejected"){return an}return aq.value}}return an}O.prototype.toString=function(){return"[object Promise]"};O.prototype.then=function(ap,aq,Q){var ar=this;var at=h();var an=false;function ao(aw){try{return typeof ap==="function"?ap(aw):aw}catch(av){return D(av)}}function au(av){if(typeof aq==="function"){m(av,ar);try{return aq(av)}catch(aw){return D(aw)}}return D(av)}function e(av){return typeof Q==="function"?Q(av):av}l.nextTick(function(){ar.promiseDispatch(function(av){if(an){return}an=true;at.resolve(ao(av))},"when",[function(av){if(an){return}an=true;at.resolve(au(av))}])});ar.promiseDispatch(void 0,"when",[void 0,function(av){var ax;var ay=false;try{ax=e(av)}catch(aw){ay=true;if(l.onerror){l.onerror(aw)}else{throw aw}}if(!ay){at.notify(ax)}}]);return at.promise};l.tap=function(e,Q){return l(e).tap(Q)};O.prototype.tap=function(e){e=l(e);return this.then(function(Q){return e.fcall(Q).thenResolve(Q)})};l.when=P;function P(an,e,Q,ao){return l(an).then(e,Q,ao)}O.prototype.thenResolve=function(e){return this.then(function(){return e})};l.thenResolve=function(Q,e){return l(Q).thenResolve(e)};O.prototype.thenReject=function(e){return this.then(function(){throw e})};l.thenReject=function(Q,e){return l(Q).thenReject(e)};l.nearer=J;function J(Q){if(y(Q)){var e=Q.inspect();if(e.state==="fulfilled"){return e.value}}return Q}l.isPromise=y;function y(e){return e instanceof O}l.isPromiseAlike=N;function N(e){return W(e)&&typeof e.then==="function"}l.isPending=ad;function ad(e){return y(e)&&e.inspect().state==="pending"}O.prototype.isPending=function(){return this.inspect().state==="pending"};l.isFulfilled=R;function R(e){return !y(e)||e.inspect().state==="fulfilled"}O.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};l.isRejected=V;function V(e){return y(e)&&e.inspect().state==="rejected"}O.prototype.isRejected=function(){return this.inspect().state==="rejected"};var ab=[];var al=[];var ae=[];var o=true;function ai(){ab.length=0;al.length=0;if(!o){o=true}}function B(Q,e){if(!o){return}if(typeof process==="object"&&typeof process.emit==="function"){l.nextTick.runAfter(function(){if(S(al,Q)!==-1){process.emit("unhandledRejection",e,Q);ae.push(Q)}})}al.push(Q);if(e&&typeof e.stack!=="undefined"){ab.push(e.stack)}else{ab.push("(no stack) "+e)}}function k(Q){if(!o){return}var e=S(al,Q);if(e!==-1){if(typeof process==="object"&&typeof process.emit==="function"){l.nextTick.runAfter(function(){var an=S(ae,Q);if(an!==-1){process.emit("rejectionHandled",ab[e],Q);ae.splice(an,1)}})}al.splice(e,1);ab.splice(e,1)}}l.resetUnhandledRejections=ai;l.getUnhandledReasons=function(){return ab.slice()};l.stopUnhandledRejectionTracking=function(){ai();o=false};ai();l.reject=D;function D(Q){var e=O({when:function(ap){if(ap){k(this)}return ap?ap(Q):this}},function ao(){return this},function an(){return{state:"rejected",reason:Q}});B(e,Q);return e}l.fulfill=z;function z(e){return O({when:function(){return e},get:function(an){return e[an]},set:function(an,ao){e[an]=ao},"delete":function(an){delete e[an]},post:function(ao,an){if(ao===null||ao===void 0){return e.apply(void 0,an)}else{return e[ao].apply(e,an)}},apply:function(ao,an){return e.apply(ao,an)},keys:function(){return G(e)}},void 0,function Q(){return{state:"fulfilled",value:e}})}function M(Q){var e=h();l.nextTick(function(){try{Q.then(e.resolve,e.reject,e.notify)}catch(an){e.reject(an)}});return e.promise}l.master=v;function v(e){return O({isDef:function(){}},function Q(ao,an){return Y(e,ao,an)},function(){return l(e).inspect()})}l.spread=f;function f(an,e,Q){return l(an).spread(e,Q)}O.prototype.spread=function(e,Q){return this.all().then(function(an){return e.apply(void 0,an)},Q)};l.async=T;function T(e){return function(){function an(au,ar){var aq;if(typeof StopIteration==="undefined"){try{aq=ao[au](ar)}catch(at){return D(at)}if(aq.done){return l(aq.value)}else{return P(aq.value,ap,Q)}}else{try{aq=ao[au](ar)}catch(at){if(w(at)){return l(at.value)}else{return D(at)}}return P(aq,ap,Q)}}var ao=e.apply(this,arguments);var ap=an.bind(an,"next");var Q=an.bind(an,"throw");return ap()}}l.spawn=r;function r(e){l.done(l.async(e)())}l["return"]=i;function i(e){throw new I(e)}l.promised=q;function q(e){return function(){return f([this,x(arguments)],function(Q,an){return e.apply(Q,an)})}}l.dispatch=Y;function Y(Q,an,e){return l(Q).dispatch(an,e)}O.prototype.dispatch=function(ao,an){var Q=this;var e=h();l.nextTick(function(){Q.promiseDispatch(e.resolve,ao,an)});return e.promise};l.get=function(e,Q){return l(e).dispatch("get",[Q])};O.prototype.get=function(e){return this.dispatch("get",[e])};l.set=function(e,Q,an){return l(e).dispatch("set",[Q,an])};O.prototype.set=function(e,Q){return this.dispatch("set",[e,Q])};l.del=l["delete"]=function(e,Q){return l(e).dispatch("delete",[Q])};O.prototype.del=O.prototype["delete"]=function(e){return this.dispatch("delete",[e])};l.mapply=l.post=function(an,Q,e){return l(an).dispatch("post",[Q,e])};O.prototype.mapply=O.prototype.post=function(Q,e){return this.dispatch("post",[Q,e])};l.send=l.mcall=l.invoke=function(Q,e){return l(Q).dispatch("post",[e,ac(arguments,2)])};O.prototype.send=O.prototype.mcall=O.prototype.invoke=function(e){return this.dispatch("post",[e,ac(arguments,1)])};l.fapply=function(Q,e){return l(Q).dispatch("apply",[void 0,e])};O.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,ac(arguments,1)])};O.prototype.fcall=function(){return this.dispatch("apply",[void 0,ac(arguments)])};l.fbind=function(Q){var ao=l(Q);var e=ac(arguments,1);return function an(){return ao.dispatch("apply",[this,e.concat(ac(arguments))])}};O.prototype.fbind=function(){var an=this;var e=ac(arguments);return function Q(){return an.dispatch("apply",[this,e.concat(ac(arguments))])}};l.keys=function(e){return l(e).dispatch("keys",[])};O.prototype.keys=function(){return this.dispatch("keys",[])};l.all=x;function x(e){return P(e,function(ao){var Q=0;var an=h();c(ao,function(at,ar,aq){var ap;if(y(ar)&&(ap=ar.inspect()).state==="fulfilled"){ao[aq]=ap.value}else{++Q;P(ar,function(au){ao[aq]=au;if(--Q===0){an.resolve(ao)}},an.reject,function(au){an.notify({index:aq,value:au})})}},void 0);if(Q===0){an.resolve(ao)}return an.promise})}O.prototype.all=function(){return x(this)};l.any=K;function K(an){if(an.length===0){return l.resolve()}var Q=l.defer();var e=0;c(an,function(aq,at,ap){var av=an[ap];e++;P(av,au,ao,ar);function au(aw){Q.resolve(aw)}function ao(aw){e--;if(e===0){aw.message=("Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+aw.message);Q.reject(aw)}}function ar(aw){Q.notify({index:ap,value:aw})}},undefined);return Q.promise}O.prototype.any=function(){return K(this)};l.allResolved=C(d,"allResolved","allSettled");function d(e){return P(e,function(Q){Q=b(Q,l);return P(x(b(Q,function(an){return P(an,af,af)})),function(){return Q})})}O.prototype.allResolved=function(){return d(this)};l.allSettled=t;function t(e){return l(e).allSettled()}O.prototype.allSettled=function(){return this.then(function(e){return x(b(e,function(an){an=l(an);function Q(){return an.inspect()}return an.then(Q,Q)}))})};l.fail=l["catch"]=function(e,Q){return l(e).then(void 0,Q)};O.prototype.fail=O.prototype["catch"]=function(e){return this.then(void 0,e)};l.progress=F;function F(e,Q){return l(e).then(void 0,void 0,Q)}O.prototype.progress=function(e){return this.then(void 0,void 0,e)};l.fin=l["finally"]=function(e,Q){return l(e)["finally"](Q)};O.prototype.fin=O.prototype["finally"]=function(e){if(!e||typeof e.apply!=="function"){throw new Error("Q can't apply finally callback")}e=l(e);return this.then(function(Q){return e.fcall().then(function(){return Q})},function(Q){return e.fcall().then(function(){throw Q})})};l.done=function(an,e,ao,Q){return l(an).done(e,ao,Q)};O.prototype.done=function(e,ao,an){var Q=function(aq){l.nextTick(function(){m(aq,ap);if(l.onerror){l.onerror(aq)}else{throw aq}})};var ap=e||ao||an?this.then(e,ao,an):this;if(typeof process==="object"&&process&&process.domain){Q=process.domain.bind(Q)}ap.then(void 0,Q)};l.timeout=function(an,Q,e){return l(an).timeout(Q,e)};O.prototype.timeout=function(an,Q){var e=h();var ao=setTimeout(function(){if(!Q||"string"===typeof Q){Q=new Error(Q||"Timed out after "+an+" ms");Q.code="ETIMEDOUT"}e.reject(Q)},an);this.then(function(ap){clearTimeout(ao);e.resolve(ap)},function(ap){clearTimeout(ao);e.reject(ap)},e.notify);return e.promise};l.delay=function(e,Q){if(Q===void 0){Q=e;e=void 0}return l(e).delay(Q)};O.prototype.delay=function(e){return this.then(function(an){var Q=h();setTimeout(function(){Q.resolve(an)},e);return Q.promise})};l.nfapply=function(Q,e){return l(Q).nfapply(e)};O.prototype.nfapply=function(Q){var e=h();var an=ac(Q);an.push(e.makeNodeResolver());this.fapply(an).fail(e.reject);return e.promise};l.nfcall=function(Q){var e=ac(arguments,1);return l(Q).nfapply(e)};O.prototype.nfcall=function(){var Q=ac(arguments);var e=h();Q.push(e.makeNodeResolver());this.fapply(Q).fail(e.reject);return e.promise};l.nfbind=l.denodeify=function(Q){if(Q===undefined){throw new Error("Q can't wrap an undefined function")}var e=ac(arguments,1);return function(){var ao=e.concat(ac(arguments));var an=h();ao.push(an.makeNodeResolver());l(Q).fapply(ao).fail(an.reject);return an.promise}};O.prototype.nfbind=O.prototype.denodeify=function(){var e=ac(arguments);e.unshift(this);return l.denodeify.apply(void 0,e)};l.nbind=function(an,e){var Q=ac(arguments,2);return function(){var aq=Q.concat(ac(arguments));var ao=h();aq.push(ao.makeNodeResolver());function ap(){return an.apply(e,arguments)}l(ap).fapply(aq).fail(ao.reject);return ao.promise}};O.prototype.nbind=function(){var e=ac(arguments,0);e.unshift(this);return l.nbind.apply(void 0,e)};l.nmapply=l.npost=function(an,Q,e){return l(an).npost(Q,e)};O.prototype.nmapply=O.prototype.npost=function(an,Q){var ao=ac(Q||[]);var e=h();ao.push(e.makeNodeResolver());this.dispatch("post",[an,ao]).fail(e.reject);return e.promise};l.nsend=l.nmcall=l.ninvoke=function(an,Q){var ao=ac(arguments,2);var e=h();ao.push(e.makeNodeResolver());l(an).dispatch("post",[Q,ao]).fail(e.reject);return e.promise};O.prototype.nsend=O.prototype.nmcall=O.prototype.ninvoke=function(Q){var an=ac(arguments,1);var e=h();an.push(e.makeNodeResolver());this.dispatch("post",[Q,an]).fail(e.reject);return e.promise};l.nodeify=ag;function ag(Q,e){return l(Q).nodeify(e)}O.prototype.nodeify=function(e){if(e){this.then(function(Q){l.nextTick(function(){e(null,Q)})},function(Q){l.nextTick(function(){e(Q)})})}else{return this}};l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var s=X();return l});